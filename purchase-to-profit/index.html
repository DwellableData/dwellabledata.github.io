<!DOCTYPE html>
<meta charset="utf-8">
<style>
  .state{
    fill: none;
    stroke: #696969;
    stroke-width: 1;
  }
  .state:hover{
    fill-opacity:0.5;
  }
  #tooltip {   
    position: absolute;           
    text-align: center;
    padding: 20px;             
    margin: 10px;
    font: 12px sans-serif;        
    background: lightsteelblue;   
    border: 1px;      
    border-radius: 2px;           
    pointer-events: none;         
  }
  #tooltip h4{
    margin:0;
    font-size:14px;
  }
  #tooltip{
    background:rgba(0,0,0,0.9);
    border:1px solid grey;
    border-radius:5px;
    font-size:12px;
    width:auto;
    padding:4px;
    color:white;
    opacity:0;
  }
  #tooltip table{
    table-layout:fixed;
  }
  #tooltip tr td{
    padding:0;
    margin:0;
  }
  #tooltip tr td:nth-child(1){
    width:50px;
  }
  #tooltip tr td:nth-child(2){
    text-align:center;
  }
</style>
<body>
<div id="tooltip">
</div>

<svg width="960" height="600" id="statesvg">
</svg>

<script src="statehover.js">
</script>

<script src="../d3/d3.v3.min.js">
</script>

<script>

  var colors = ['rgb(252,141,89)','rgb(254,224,144)','rgb(255,255,191)','rgb(224,243,248)','rgb(145,191,219)','rgb(69,117,180)'];

  function tooltipHtml(n, d){ /* function to create html content string in tooltip div. */
    return "<h4>"+d.label+"</h4><table>"+
      "<tr><td>Breakeven</td><td>"+(d.years)+"</td></tr>"+
      "<tr><td>Price</td><td>"+(d.home)+"</td></tr>"+
      "<tr><td>Rate/Night</td><td>"+(d.rent)+"</td></tr>"+
      "</table>";
  }

  
  d3.tsv("statemediandata.tsv", function(d) {

    var statedata = {};

    d.forEach(function(state) {
      var shade = new String();

      if (state.years < 2) {
        shade = colors[5];
      } else if ( state.years >=2 && state.years <4 ) {
        shade = colors[4];
      } else if ( state.years >=4 && state.years <6 ) {
        shade = colors[3];
      } else if ( state.years >=6 && state.years <8 ) {
        shade = colors[2];
      } else if ( state.years >=8 && state.years <10) {
        shade = colors[1];
      } else {
        shade = colors[0];
      };

      statedata[state.id]={state: state.state, label: state.label, rent: state.rent, years: state.years, home: state.home, color:shade}; 

    }); 

   /* draw states on id #statesvg */ 
    usa.draw("#statesvg", statedata, tooltipHtml);

  });


</script>

</body>